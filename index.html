<template>
  <div>
    <h1>üì¶ ‡¶á‡¶®‡¶≠‡ßá‡¶®‡ßç‡¶ü‡¶∞‡¶ø ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™</h1>

    <form @submit.prevent="addProduct">
      <input v-model="product.name" placeholder="‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" required>
      <input v-model="product.unit" placeholder="‡¶è‡¶ï‡¶ï (kg/pcs)" required>
      <input type="number" v-model="product.price" placeholder="‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø" required>
      <input type="number" v-model="product.stockIn" placeholder="‡¶∏‡ßç‡¶ü‡¶ï ‡¶á‡¶®" required>
      <button type="submit">‚ûï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </form>

    <h2>üìã ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßç‡¶ü‡¶ï ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
    <table>
      <tr>
        <th>‡¶®‡¶æ‡¶Æ</th><th>‡¶è‡¶ï‡¶ï</th><th>‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</th><th>‡¶∏‡ßç‡¶ü‡¶ï</th><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
      </tr>
      <tr v-for="item in inventory" :key="item.Product_ID">
        <td>{{ item.Product_Name }}</td>
        <td>{{ item.Unit }}</td>
        <td>{{ item.Price_per_Unit }}</td>
        <td>{{ item.Current_Stock }}</td>
        <td>{{ item.Last_Updated }}</td>
      </tr>
    </table>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'

const inventory = ref([])
const product = ref({ name: '', unit: '', price: '', stockIn: 0 })

const API_URL = 'https://sheetdb.io/api/v1/byvncwpisehos'

const getInventory = async () => {
  const res = await axios.get(API_URL)
  inventory.value = res.data
}

const addProduct = async () => {
  await axios.post(API_URL, {
    data: {
      Product_Name: product.value.name,
      Unit: product.value.unit,
      Price_per_Unit: product.value.price,
      Stock_In: product.value.stockIn,
      Stock_Out: 0,
      Current_Stock: product.value.stockIn,
      Last_Updated: new Date().toLocaleDateString()
    }
  })
  product.value = { name: '', unit: '', price: '', stockIn: 0 }
  getInventory()
}

onMounted(getInventory)
</script>

<style>
body { font-family: Kalpurush, sans-serif; background: #f7f7f7; padding: 20px; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
input, button { margin: 5px; padding: 5px; }
       </style>
